---
// src/components/navbar/RecursiveMenu.astro
import type { NavigationItem } from "@lib/types/custom-page";

interface Props {
    items: NavigationItem[];
    isRoot?: boolean;
}

const { items, isRoot = false } = Astro.props;
---

<ul
    class:list={[
        "menu",
        "bg-base-100",
        { "w-full": isRoot },
        { "rounded-box": isRoot },
        { "border border-base-content/10": isRoot },
    ]}
>
    {
        items.map((item) => {
            const hasChildren = item.children && item.children.length > 0;
            const path =
                !hasChildren && item.path!.endsWith("/")
                    ? item.path
                    : `${item.path}/`;

            return (
                <li class="w-full">
                    {hasChildren ? (
                        <details open={false} class="w-full">
                            <summary class="text-base-content">
                                {item.icon && (
                                    <i class={`fa-solid fa-${item.icon} `} />
                                )}
                                {item.title}
                            </summary>
                            <Astro.self items={item.children} />
                        </details>
                    ) : (
                        <a href={path} class="text-base-content">
                            {item.icon && (
                                <i class={`fa-solid fa-${item.icon} `} />
                            )}
                            {item.title}
                        </a>
                    )}
                </li>
            );
        })
    }
</ul>
